<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Счетчик посетителей</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        #count {
            font-size: 48px;
            color: #333;
        }
    </style>
</head>
<body>
    <h1>Добро пожаловать на наш сайт!</h1>
    <p>Текущих посетителей: <span id="count">Загрузка...</span></p>

    <script>
        // Функция для получения текущего количества посетителей
        async function getCount() {
            try {
                const response = await fetch('https://api.countapi.xyz/hit/your-unique-namespace/your-key');
                const data = await response.json();
                document.getElementById('count').textContent = data.value;
            } catch (error) {
                console.error('Ошибка при получении счетчика:', error);
                document.getElementById('count').textContent = 'Ошибка';
            }
        }

        // Функция для получения IP-адреса пользователя
        async function getIP() {
            try {
                const response = await fetch('https://api.ipify.org?format=json');
                const data = await response.json();
                return data.ip;
            } catch (error) {
                console.error('Ошибка при получении IP:', error);
                return 'Неизвестно';
            }
        }

        // Функция для отправки IP-адреса на Webhook.site (для тестирования)
        async function sendIP(ip) {
            try {
                const webhookURL = 'https://webhook.site/your-unique-url'; // Замените на ваш Webhook URL
                await fetch(webhookURL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ ip: ip, timestamp: new Date().toISOString() })
                });
            } catch (error) {
                console.error('Ошибка при отправке IP:', error);
            }
        }

        // Инициализация
        (async () => {
            await getCount();
            const userIP = await getIP();
            await sendIP(userIP);
        })();
    </script>
</body>
</html>
